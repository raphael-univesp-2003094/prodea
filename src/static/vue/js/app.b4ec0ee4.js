(function(e){function t(t){for(var n,s,o=t[0],c=t[1],u=t[2],d=0,m=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(m.length)m.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={app:0},i=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=a("bc3a"),i=a.n(r),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isInitialized?a("router-view"):a("div",[e._v("Iniciando aplicação...")])],1)},o=[],c=a("5530"),u=a("2f62"),l={name:"App",computed:Object(c["a"])({},Object(u["c"])({isInitialized:"auth/isInitialized"}))},d=l,m=a("2877"),p=Object(m["a"])(d,s,o,!1,null,null,null),v=p.exports,f=a("1da1"),b=(a("96cf"),a("8c4f")),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container vh-100"},[n("div",{staticClass:"row h-100 align-items-center"},[n("div",{staticClass:"col text-center"},[n("img",{attrs:{src:a("b66f"),alt:"Brasão da Prefeitura Municipal de Penápolis"}}),n("h1",[e._v("Controle de Pedidos")]),n("h3",{staticClass:"mb-4"},[e._v("Prefeitura Municipal de Penápolis")]),n("router-link",{staticClass:"btn btn-primary",attrs:{tag:"button",to:"/login"}},[n("i",{staticClass:"bi bi-box-arrow-in-right"}),e._v(" Entrar na Aplicação ")])],1)])])},g=[],C={name:"Inicio"},x=C,k=Object(m["a"])(x,h,g,!1,null,null,null),w=k.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container vh-100"},[a("div",{staticClass:"row h-100 align-items-center justify-content-center"},[a("div",{staticClass:"col mw-330px"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.doLogin.apply(null,arguments)}}},[e._m(0),a("p",[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("E-mail")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control form-control-sm",attrs:{type:"email",required:"",autofocus:"",disabled:e.isBusy},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})]),a("p",[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Senha")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.senha,expression:"form.senha"}],staticClass:"form-control form-control-sm",attrs:{type:"password",required:"",disabled:e.isBusy},domProps:{value:e.form.senha},on:{input:function(t){t.target.composing||e.$set(e.form,"senha",t.target.value)}}})]),a("p",{staticClass:"d-grid gap-2"},[a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit",disabled:e.isBusy}},[a("i",{staticClass:"bi bi-box-arrow-in-right"}),e._v(" Entrar ")])])])])])])},_=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"w-100 fs-1 text-primary text-center"},[a("i",{staticClass:"bi bi-shield-lock-fill"})])}],j=(a("ac1f"),a("5319"),{name:"Login",data:function(){return{isBusy:!1,form:{email:"",senha:""}}},computed:Object(c["a"])({},Object(u["c"])({isAuthenticated:"auth/isAuthenticated"})),methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])({login:"auth/login"})),{},{doLogin:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isBusy){t.next=2;break}return t.abrupt("return");case 2:return e.isBusy=!0,t.next=5,e.login(e.form);case 5:if(!e.isAuthenticated){t.next=8;break}return t.next=8,e.$router.replace({name:"pedidos"});case 8:e.isBusy=!1;case 9:case"end":return t.stop()}}),t)})))()}})}),O=j,A=Object(m["a"])(O,y,_,!1,null,null,null),E=A.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("NavBar"),a("div",[e._v("Pedidos")])],1)},S=[],I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar navbar-expand-sm navbar-dark bg-dark"},[a("div",{staticClass:"container-fluid"},[a("span",{staticClass:"navbar-brand"},[e._v("Controle de Pedidos")]),e._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[a("ul",{staticClass:"navbar-nav me-auto"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/pedidos","active-class":"active"}},[e._v(" Pedidos ")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/relatorios","active-class":"active"}},[e._v(" Relatórios ")])],1),e.isAdmin?a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/usuarios","active-class":"active"}},[e._v(" Usuários ")])],1):e._e(),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/alterar-senha","active-class":"active"}},[e._v(" Alterar Senha ")])],1)]),a("ul",{staticClass:"navbar-nav ms-auto"},[a("li",{staticClass:"nav-item"},[a("b",{staticClass:"nav-link"},[e._v(e._s(e.usuario?e.usuario["nome"]:""))])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link c-pointer",on:{click:e.doLogout}},[e._v("Sair")])])])])])])},B=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],P={name:"NavBar",computed:Object(c["a"])({},Object(u["c"])({isAdmin:"auth/isAdmin",usuario:"auth/usuario"})),methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])({logout:"auth/logout"})),{},{doLogout:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.logout();case 2:if(e.isAuthenticated){t.next=5;break}return t.next=5,e.$router.replace({name:"login"});case 5:case"end":return t.stop()}}),t)})))()}})},z=P,R=Object(m["a"])(z,I,B,!1,null,null,null),T=R.exports,$={name:"Pedidos",components:{NavBar:T}},q=$,U=Object(m["a"])(q,N,S,!1,null,"6b8119dd",null),L=U.exports,M={namespaced:!0,state:{isInitialized:!1,usuario:null,accessToken:null},getters:{isInitialized:function(e){return e.isInitialized},usuario:function(e){return e.usuario},accessToken:function(e){return e.accessToken},isAuthenticated:function(e){return!!e.usuario&&!!e.accessToken},isAdmin:function(e){return!!e.usuario&&e.usuario.admin}},mutations:{setIsInitialized:function(e,t){e.isInitialized=t},setUsuario:function(e,t){e.usuario=t},setAccessToken:function(e,t){e.accessToken=t,t?localStorage.setItem("accessToken",t):localStorage.removeItem("accessToken")}},actions:{initialize:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.commit,n=e.dispatch,r=localStorage.getItem("accessToken"),!r){t.next=8;break}return a("setAccessToken",r),t.next=6,n("loadUsuario");case 6:t.next=10;break;case 8:return t.next=10,n("logout");case 10:a("setIsInitialized",!0);case 11:case"end":return t.stop()}}),t)})))()},login:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function a(){var n,r,s,o,c,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,r=e.dispatch,s=t.email,o=t.senha,a.prev=2,a.next=5,i.a.post("/api/auth/login",{email:s,senha:o});case 5:c=a.sent,u=c.data,n("setUsuario",u.usuario),n("setAccessToken",u.access_token),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](2),r("logout");case 14:case"end":return a.stop()}}),a,null,[[2,11]])})))()},loadUsuario:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,n=e.dispatch,t.prev=1,t.next=4,i.a.post("/api/auth/me");case 4:r=t.sent,s=r.data,a("setUsuario",s.usuario),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),n("logout");case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},logout:function(e){var t=e.commit;t("setUsuario",null),t("setAccessToken",null)}}},J=M;n["a"].use(u["a"]);var V=new u["a"].Store({modules:{auth:J}}),D=V,W=(a("159b"),a("7b17")),F=null;function G(){F=document.createElement("div"),F.className="toast-container position-fixed bottom-0 end-0 p-3",F.style.zIndex="11",document.body.appendChild(F)}function H(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];F||G();var r=document.createElement("i");r.className="bi bi-square-fill text-".concat(e," me-2");var i=document.createElement("strong");i.className="me-auto",i.textContent=t;var s=document.createElement("button");s.className="btn-close",s.setAttribute("type","button"),s.setAttribute("data-bs-dismiss","toast");var o=document.createElement("div");o.className="toast-header",o.appendChild(r),o.appendChild(i),o.appendChild(s);var c=null;n.length>0&&(c=document.createElement("div"),c.className="mt-2 pt-2 border-top",n.forEach((function(e){var t=document.createElement("button");t.className="btn btn-".concat(e.intent||"primary"," btn-sm me-2"),t.textContent=e.text,t.setAttribute("data-bs-dismiss","toast"),t.style.width="60px","function"===typeof e.onClick&&t.addEventListener("click",e.onClick),c.appendChild(t)})));var u=document.createElement("div");u.className="toast-body",u.textContent=a,c&&u.appendChild(c);var l=document.createElement("div");return l.className="toast mb-2 mt-2",l.setAttribute("role","alert"),l.appendChild(o),l.appendChild(u),F.appendChild(l),l.addEventListener("hidden.bs.toast",(function(){F.removeChild(l)})),l}var K={displaySuccess:function(e){var t=H("success","Sucesso",e),a=new W["a"](t);a.show()},displayWarning:function(e){var t=H("warning","Atenção",e),a=new W["a"](t);a.show()},displayError:function(e){var t=H("danger","Erro",e),a=new W["a"](t);a.show()},displayConfirm:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=H("primary","Confirme",e,[{intent:"primary",text:"Sim",onClick:t},{intent:"danger",text:"Não",onClick:a}]),r=new W["a"](n);r.show()}},Q=K,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("NavBar"),a("div",[e._v("Relatórios")])],1)},Y=[],Z={name:"Relatorios",components:{NavBar:T}},ee=Z,te=Object(m["a"])(ee,X,Y,!1,null,"60fd5456",null),ae=te.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("NavBar"),a("div",[e._v("AlterarSenha")])],1)},re=[],ie={name:"AlterarSenha",components:{NavBar:T}},se=ie,oe=Object(m["a"])(se,ne,re,!1,null,"adbc5c7e",null),ce=oe.exports,ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("NavBar"),a("div",[e._v("Usuários")])],1)},le=[],de={name:"Usuarios",components:{NavBar:T}},me=de,pe=Object(m["a"])(me,ue,le,!1,null,"3bc9e98a",null),ve=pe.exports;n["a"].use(b["a"]);var fe=[{path:"/",name:"inicio",component:w},{path:"/login",name:"login",component:E},{path:"/pedidos",name:"pedidos",component:L,meta:{requireAuth:!0}},{path:"/relatorios",name:"relatorios",component:ae,meta:{requireAuth:!0}},{path:"/alterar-senha",name:"alterarSenha",component:ce,meta:{requireAuth:!0}},{path:"/usuarios",name:"usuarios",component:ve,meta:{requireAuth:!0,requireAdmin:!0}}],be=new b["a"]({mode:"history",base:"/",routes:fe});be.beforeEach(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t,a,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.meta,D.getters["auth/isInitialized"]){e.next=4;break}return e.next=4,D.dispatch("auth/initialize");case 4:if(!r.requireAuth||D.getters["auth/isAuthenticated"]){e.next=7;break}return Q.displayError("Você não está autenticado."),e.abrupt("return",n({name:"login"}));case 7:if(!r.requireAdmin||D.getters["auth/isAdmin"]){e.next=10;break}return Q.displayError("Você não tem permissão."),e.abrupt("return",n({name:"pedidos"}));case 10:return e.abrupt("return",n());case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}());var he=be;a("a1a3");i.a.interceptors.request.use((function(e){var t=e,a=localStorage.getItem("accessToken");return a&&!e.headers.Authorization&&(t.headers.Authorization="Bearer ".concat(a)),t})),new n["a"]({router:he,store:D,render:function(e){return e(v)}}).$mount("#app")},a1a3:function(e,t,a){},b66f:function(e,t,a){e.exports=a.p+"../../static/vue/img/brasao_prefeitura.29d4fff0.jpg"}});
//# sourceMappingURL=app.b4ec0ee4.js.map