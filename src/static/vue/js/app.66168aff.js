(function(e){function t(t){for(var r,i,n=t[0],c=t[1],l=t[2],u=0,m=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&m.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(m.length)m.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,i=1;i<a.length;i++){var c=a[i];0!==s[c]&&(r=!1)}r&&(o.splice(t--,1),e=n(n.s=a[0]))}return e}var r={},s={app:0},o=[];function i(e){return n.p+"../../static/vue/js/"+({}[e]||e)+"."+{"chunk-2d216214":"a631c492","chunk-2d216257":"d8c9bc89","chunk-70a2df70":"eee9e5bf"}[e]+".js"}function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.e=function(e){var t=[],a=s[e];if(0!==a)if(a)t.push(a[2]);else{var r=new Promise((function(t,r){a=s[e]=[t,r]}));t.push(a[2]=r);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,n.nc&&c.setAttribute("nonce",n.nc),c.src=i(e);var l=new Error;o=function(t){c.onerror=c.onload=null,clearTimeout(u);var a=s[e];if(0!==a){if(a){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",l.name="ChunkLoadError",l.type=r,l.request=o,a[1](l)}s[e]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},n.m=e,n.c=r,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=a("bc3a"),o=a.n(s),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isInitialized?a("router-view"):a("div",[e._v("Iniciando aplicação...")])],1)},n=[],c=a("5530"),l=a("2f62"),u={name:"App",computed:Object(c["a"])({},Object(l["b"])({isInitialized:"auth/isInitialized"}))},d=u,m=a("2877"),p=Object(m["a"])(d,i,n,!1,null,null,null),v=p.exports,f=a("1da1"),b=(a("96cf"),a("8c4f")),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container vh-100"},[r("div",{staticClass:"row h-100 align-items-center"},[r("div",{staticClass:"col text-center"},[r("img",{attrs:{src:a("b66f"),alt:"Brasão da Prefeitura Municipal de Penápolis"}}),r("h1",[e._v("Controle de Pedidos")]),r("h3",{staticClass:"mb-4"},[e._v("Prefeitura Municipal de Penápolis")]),r("router-link",{staticClass:"btn btn-primary",attrs:{tag:"button",to:"/login"}},[r("i",{staticClass:"bi bi-box-arrow-in-right"}),e._v(" Entrar na Aplicação ")])],1)])])},C=[],y={name:"Inicio"},g=y,x=Object(m["a"])(g,h,C,!1,null,null,null),w=x.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container vh-100"},[a("div",{staticClass:"row h-100 align-items-center justify-content-center"},[a("div",{staticClass:"col mw-330px"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.doLogin.apply(null,arguments)}}},[e._m(0),a("p",[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("E-mail")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control form-control-sm",attrs:{type:"text",autofocus:"",disabled:e.isBusy},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})]),a("p",[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Senha")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.senha,expression:"form.senha"}],staticClass:"form-control form-control-sm",attrs:{type:"password",disabled:e.isBusy},domProps:{value:e.form.senha},on:{input:function(t){t.target.composing||e.$set(e.form,"senha",t.target.value)}}})]),a("p",{staticClass:"d-grid gap-2"},[a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit",disabled:e.isBusy}},[a("i",{staticClass:"bi bi-box-arrow-in-right"}),e._v(" Entrar ")])])])])])])},k=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"w-100 fs-1 text-primary text-center"},[a("i",{staticClass:"bi bi-shield-lock-fill"})])}],S=(a("a15b"),a("ac1f"),a("5319"),a("506a")),E=a("53ca"),P=(a("159b"),a("b64b"),a("2ef0")),B=a.n(P);function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"snake_case";if("object"!==Object(E["a"])(e))return e;var a,r={};return"snake_case"===t?a=B.a.snakeCase:"camelCase"===t&&(a=B.a.camelCase),Object.keys(e).forEach((function(s){var o=a(s);null!==e[s]&&"object"===Object(E["a"])(e[s])?r[o]=j(e[s],t):r[o]=e[s]})),r}var O,N,A={me:function(){return o.a.post("/api/auth/me").then((function(e){return j(e.data,"camelCase")}))},login:function(e,t){return o.a.post("/api/auth/login",{email:e,senha:t}).then((function(e){return j(e.data,"camelCase")}))}},$=A,R=(a("99af"),{getPedidos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return O&&O.cancel(),O=o.a.CancelToken.source(),o.a.get("/api/pedidos",{params:j(e,"snake_case"),cancelToken:O.token}).then((function(e){return j(e.data,"camelCase")}))},getPedido:function(e,t){return N&&N.cancel(),N=o.a.CancelToken.source(),o.a.get("/api/pedidos/".concat(e,"/").concat(t),{cancelToken:N.token}).then((function(e){return j(e.data,"camelCase")}))},createPedido:function(e){return o.a.post("/api/pedidos",j(e,"snake_case")).then((function(e){return j(e.data,"camelCase")}))},updatePedido:function(e){return o.a.patch("/api/pedidos/".concat(e.tipo,"/").concat(e.numero),j(e,"snake_case")).then((function(e){return j(e.data,"camelCase")}))},deletePedido:function(e,t){return o.a.delete("/api/pedidos/".concat(e,"/").concat(t)).then((function(e){return j(e.data,"camelCase")}))}}),F=R,z={getUsuarios:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.a.get("/api/usuarios",{params:j(e,"snake_case")}).then((function(e){return j(e.data,"camelCase")}))},getUsuario:function(e){return o.a.get("/api/usuarios/".concat(e)).then((function(e){return j(e.data,"camelCase")}))},createUsuario:function(e){return o.a.post("/api/usuarios",j(e,"snake_case")).then((function(e){return j(e.data,"camelCase")}))},updateUsuario:function(e){return o.a.patch("/api/usuarios/".concat(e.id),j(e,"snake_case")).then((function(e){return j(e.data,"camelCase")}))},deleteUsuario:function(e){return o.a.delete("/api/usuarios/".concat(e)).then((function(e){return j(e.data,"camelCase")}))}},U=z,T={auth:$,pedidos:F,usuarios:U},I=T,D=a("7b17"),q=null;function L(){q=document.createElement("div"),q.className="toast-container position-fixed bottom-0 end-0 p-3",q.style.zIndex="11",document.body.appendChild(q)}function M(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];q||L();var s=document.createElement("i");s.className="bi bi-square-fill text-".concat(e," me-2");var o=document.createElement("strong");o.className="me-auto",o.textContent=t;var i=document.createElement("button");i.className="btn-close",i.setAttribute("type","button"),i.setAttribute("data-bs-dismiss","toast");var n=document.createElement("div");n.className="toast-header",n.appendChild(s),n.appendChild(o),n.appendChild(i);var c=null;r.length>0&&(c=document.createElement("div"),c.className="mt-2 pt-2 border-top",r.forEach((function(e){var t=document.createElement("button");t.className="btn btn-".concat(e.intent||"primary"," btn-sm me-2"),t.textContent=e.text,t.setAttribute("data-bs-dismiss","toast"),t.style.width="60px","function"===typeof e.onClick&&t.addEventListener("click",e.onClick),c.appendChild(t)})));var l=document.createElement("div");l.className="toast-body",l.style.whiteSpace="pre-line",l.textContent=a,c&&l.appendChild(c);var u=document.createElement("div");return u.className="toast mb-2 mt-2",u.setAttribute("role","alert"),u.appendChild(n),u.appendChild(l),q.appendChild(u),u.addEventListener("hidden.bs.toast",(function(){q.removeChild(u)})),u}var K={displaySuccess:function(e){var t=M("success","Sucesso",e),a=new D["a"](t);a.show()},displayWarning:function(e){var t=M("warning","Atenção",e),a=new D["a"](t);a.show()},displayError:function(e){var t=M("danger","Erro",e),a=new D["a"](t);a.show()},displayConfirm:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=M("primary","Confirme",e,[{intent:"primary",text:"Sim",onClick:t},{intent:"danger",text:"Não",onClick:a}]),s=new D["a"](r);s.show()}},W=K,J={name:"Login",data:function(){return{isBusy:!1,form:{email:"",senha:""},validationSchema:S["a"]().shape({email:S["b"]().email('O campo "E-mail" deve conter um e-mail válido.').required('O campo "E-mail" é obrigatório.'),senha:S["b"]().required('O campo "Senha" é obrigatório.')})}},computed:Object(c["a"])({},Object(l["b"])({isAuthenticated:"auth/isAuthenticated"})),methods:{doLogin:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isBusy){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.validationSchema.validate(e.form,{abortEarly:!1});case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t["catch"](2),W.displayError(t.t0.errors.join("\n")),t.abrupt("return");case 11:return e.isBusy=!0,t.prev=12,t.next=15,I.auth.login(e.form.email,e.form.senha);case 15:return a=t.sent,r=a.usuario,s=a.accessToken,e.$store.commit("auth/setUsuario",r),e.$store.commit("auth/setAccessToken",s),t.next=22,e.$router.replace({name:"pedidos"});case 22:t.next=29;break;case 24:t.prev=24,t.t1=t["catch"](12),e.$store.commit("auth/setUsuario",null),e.$store.commit("auth/setAccessToken",null),null!==(o=t.t1.response)&&void 0!==o&&null!==(i=o.data)&&void 0!==i&&i.error?W.displayError(t.t1.response.data.error):W.displayError("Ocorreu um erro ao efetuar o login.");case 29:e.isBusy=!1;case 30:case"end":return t.stop()}}),t,null,[[2,7],[12,24]])})))()}}},V=J,G=Object(m["a"])(V,_,k,!1,null,null,null),Y=G.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("NavBar"),a("div",{staticClass:"container"},[e._m(0),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("form",{on:{submit:function(e){e.preventDefault()}}},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Número do Pedido")]),a("input",{directives:[{name:"only-numbers",rawName:"v-only-numbers"},{name:"model",rawName:"v-model",value:e.form.numero,expression:"form.numero"}],ref:"numeroInput",staticClass:"form-control form-control-sm",attrs:{type:"text",disabled:e.isBusy},domProps:{value:e.form.numero},on:{input:[function(t){t.target.composing||e.$set(e.form,"numero",t.target.value)},e.debounceSearchPedido]}})]),a("div",{staticClass:"col"},[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Tipo do Pedido")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.tipo,expression:"form.tipo"}],staticClass:"form-select form-select-sm",attrs:{disabled:e.isBusy},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"tipo",t.target.multiple?a:a[0])},e.debounceSearchPedido]}},[a("option",{attrs:{value:"SE"}},[e._v("SE")]),a("option",{attrs:{value:"RM"}},[e._v("RM")])])]),a("div",{staticClass:"col"},[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Data de Chegada")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.dataChegada,expression:"form.dataChegada"}],staticClass:"form-control form-control-sm",attrs:{type:"date",disabled:e.isBusy},domProps:{value:e.form.dataChegada},on:{input:function(t){t.target.composing||e.$set(e.form,"dataChegada",t.target.value)}}})])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Secretaria Solicitante")]),a("input",{directives:[{name:"uppercase",rawName:"v-uppercase"},{name:"model",rawName:"v-model",value:e.form.secretariaSolicitante,expression:"form.secretariaSolicitante"}],staticClass:"form-control form-control-sm",attrs:{type:"text",disabled:e.isBusy},domProps:{value:e.form.secretariaSolicitante},on:{input:function(t){t.target.composing||e.$set(e.form,"secretariaSolicitante",t.target.value)}}})]),a("div",{staticClass:"col"},[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Projeto")]),a("input",{directives:[{name:"uppercase",rawName:"v-uppercase"},{name:"model",rawName:"v-model",value:e.form.projeto,expression:"form.projeto"}],staticClass:"form-control form-control-sm",attrs:{type:"text",disabled:e.isBusy},domProps:{value:e.form.projeto},on:{input:function(t){t.target.composing||e.$set(e.form,"projeto",t.target.value)}}})])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Descrição")]),a("textarea",{directives:[{name:"uppercase",rawName:"v-uppercase"},{name:"model",rawName:"v-model",value:e.form.descricao,expression:"form.descricao"}],staticClass:"form-control form-control-sm no-resize",attrs:{rows:"3",disabled:e.isBusy},domProps:{value:e.form.descricao},on:{input:function(t){t.target.composing||e.$set(e.form,"descricao",t.target.value)}}})])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Data de Envio ao Financeiro")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.dataEnvioFinanceiro,expression:"form.dataEnvioFinanceiro"}],staticClass:"form-control form-control-sm",attrs:{type:"date",disabled:e.isBusy},domProps:{value:e.form.dataEnvioFinanceiro},on:{input:function(t){t.target.composing||e.$set(e.form,"dataEnvioFinanceiro",t.target.value)}}})]),a("div",{staticClass:"col"},[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Data de Retorno do Financeiro")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.dataRetornoFinanceiro,expression:"form.dataRetornoFinanceiro"}],staticClass:"form-control form-control-sm",attrs:{type:"date",disabled:e.isBusy},domProps:{value:e.form.dataRetornoFinanceiro},on:{input:function(t){t.target.composing||e.$set(e.form,"dataRetornoFinanceiro",t.target.value)}}})]),a("div",{staticClass:"col"},[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Situação da Autorização")]),a("input",{directives:[{name:"uppercase",rawName:"v-uppercase"},{name:"model",rawName:"v-model",value:e.form.situacaoAutorizacao,expression:"form.situacaoAutorizacao"}],staticClass:"form-control form-control-sm",attrs:{type:"text",disabled:e.isBusy},domProps:{value:e.form.situacaoAutorizacao},on:{input:function(t){t.target.composing||e.$set(e.form,"situacaoAutorizacao",t.target.value)}}})])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Observações")]),a("textarea",{directives:[{name:"uppercase",rawName:"v-uppercase"},{name:"model",rawName:"v-model",value:e.form.observacoes,expression:"form.observacoes"}],staticClass:"form-control form-control-sm no-resize",attrs:{rows:"3",disabled:e.isBusy},domProps:{value:e.form.observacoes},on:{input:function(t){t.target.composing||e.$set(e.form,"observacoes",t.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[e.existentPedido?a("button",{staticClass:"btn btn-sm btn-primary me-2",attrs:{type:"button",disabled:!e.form.numero||!e.form.tipo||e.isBusy},on:{click:e.updatePedido}},[a("i",{staticClass:"bi bi-pencil"}),e._v(" Alterar ")]):a("button",{staticClass:"btn btn-sm btn-primary me-2",attrs:{type:"button",disabled:!e.form.numero||!e.form.tipo||e.isBusy},on:{click:e.createPedido}},[a("i",{staticClass:"bi bi-check2-circle"}),e._v(" Gravar ")]),a("button",{staticClass:"btn btn-sm btn-danger me-2",attrs:{type:"button",disabled:!e.existentPedido||!e.form.numero||!e.form.tipo||e.isBusy},on:{click:e.deletePedido}},[a("i",{staticClass:"bi bi-trash"}),e._v(" Excluir ")]),a("button",{staticClass:"btn btn-sm btn-secondary",attrs:{type:"button",disabled:e.isBusy},on:{click:e.clearForm}},[a("i",{staticClass:"bi bi-eraser"}),e._v(" Limpar ")])])])])])])])],1)},Q=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h3",{staticClass:"my-4"},[a("i",{staticClass:"bi bi-card-list"}),e._v(" Pedidos ")])])])}],X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar navbar-expand-sm navbar-dark bg-dark"},[a("div",{staticClass:"container-fluid"},[a("span",{staticClass:"navbar-brand"},[e._v(" Controle de Pedidos ")]),e._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarContent"}},[a("ul",{staticClass:"navbar-nav me-auto"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/pedidos","active-class":"active"}},[a("i",{staticClass:"bi bi-card-list"}),e._v(" Pedidos ")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/relatorios","active-class":"active"}},[a("i",{staticClass:"bi bi-clipboard-data"}),e._v(" Relatórios ")])],1),e.isAdmin?a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/usuarios","active-class":"active"}},[a("i",{staticClass:"bi bi-people"}),e._v(" Usuários ")])],1):e._e(),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/alterar-senha","active-class":"active"}},[a("i",{staticClass:"bi bi-key"}),e._v(" Alterar Senha ")])],1)]),a("ul",{staticClass:"navbar-nav ms-auto"},[a("li",{staticClass:"nav-item"},[a("b",{staticClass:"nav-link"},[a("i",{staticClass:"bi bi-person"}),e._v(" "+e._s(e.usuario?e.usuario["nome"]:"")+" ")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link c-pointer",on:{click:e.doLogout}},[a("i",{staticClass:"bi bi-box-arrow-in-left"}),e._v(" Sair ")])])])])])])},Z=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarContent"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],ee={name:"NavBar",computed:Object(c["a"])({},Object(l["b"])({isAdmin:"auth/isAdmin",usuario:"auth/usuario"})),methods:{doLogout:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("auth/setUsuario",null),e.$store.commit("auth/setAccessToken",null),t.next=4,e.$router.replace({name:"login"});case 4:case"end":return t.stop()}}),t)})))()}}},te=ee,ae=Object(m["a"])(te,X,Z,!1,null,null,null),re=ae.exports,se={update:function(e){e.value=e.value.toUpperCase()}},oe=se,ie=(a("9129"),a("a9e3"),a("25eb"),{inserted:function(e){e.onkeypress=function(e){return!Number.isNaN(Number.parseInt(e.key,10))||(e.preventDefault(),!1)},e.onpaste=function(e){for(var t=e.clipboardData.getData("text"),a=t.length-1;a>=0;a-=1){var r=t.charCodeAt(a);if(r<48||r>57)return e.preventDefault(),!1}return!0}}}),ne=ie,ce={name:"Pedidos",components:{NavBar:re},directives:{uppercase:oe,onlyNumbers:ne},data:function(){return{isBusy:!1,existentPedido:!1,form:{numero:"",tipo:"SE",dataChegada:"",secretariaSolicitante:"",projeto:"",descricao:"",dataEnvioFinanceiro:"",dataRetornoFinanceiro:"",situacaoAutorizacao:"",observacoes:""},validationSchema:S["a"]().shape({numero:S["b"]().required('O campo "Número do Pedido" é obrigatório.'),tipo:S["b"]().required('O campo "Tipo do Pedido" é obrigatório.'),dataChegada:S["b"]().required('O campo "Data de Chegada" é obrigatório.'),secretariaSolicitante:S["b"]().required('O campo "Secretaria Solicitante" é obrigatório.'),projeto:S["b"]().required('O campo "Projeto" é obrigatório.'),descricao:S["b"]().required('O campo "Descrição" é obrigatório.')})}},methods:{debounceSearchPedido:B.a.debounce(Object(f["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.form.numero&&this.form.tipo){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,I.pedidos.getPedido(this.form.tipo,this.form.numero);case 5:t=e.sent,a=t.pedido,this.form.dataChegada=a.dataChegada,this.form.secretariaSolicitante=a.secretariaSolicitante,this.form.projeto=a.projeto,this.form.descricao=a.descricao,this.form.dataEnvioFinanceiro=a.dataEnvioFinanceiro,this.form.dataRetornoFinanceiro=a.dataRetornoFinanceiro,this.form.situacaoAutorizacao=a.situacaoAutorizacao,this.form.observacoes=a.observacoes,this.existentPedido=!0,W.displaySuccess("Pedido carregado."),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](2),this.existentPedido&&(this.form.dataChegada="",this.form.secretariaSolicitante="",this.form.projeto="",this.form.descricao="",this.form.dataEnvioFinanceiro="",this.form.dataRetornoFinanceiro="",this.form.situacaoAutorizacao="",this.form.observacoes="",this.existentPedido=!1);case 22:case"end":return e.stop()}}),e,this,[[2,19]])}))),800),createPedido:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.existentPedido&&e.form.numero&&e.form.tipo&&!e.isBusy){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.validationSchema.validate(e.form,{abortEarly:!1});case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t["catch"](2),W.displayError(t.t0.errors.join("\n")),t.abrupt("return");case 11:return e.isBusy=!0,t.prev=12,t.next=15,I.pedidos.createPedido(e.form);case 15:a=t.sent,r=a.pedido,e.existentPedido=!!r,W.displaySuccess("Pedido gravado."),t.next=24;break;case 21:t.prev=21,t.t1=t["catch"](12),null!==(s=t.t1.response)&&void 0!==s&&null!==(o=s.data)&&void 0!==o&&o.error?W.displayError(t.t1.response.data.error):W.displayError("Ocorreu um erro ao gravar o pedido.");case 24:e.isBusy=!1;case 25:case"end":return t.stop()}}),t,null,[[2,7],[12,21]])})))()},updatePedido:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.existentPedido&&e.form.numero&&e.form.tipo&&!e.isBusy){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.validationSchema.validate(e.form,{abortEarly:!1});case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t["catch"](2),W.displayError(t.t0.errors.join("\n")),t.abrupt("return");case 11:return e.isBusy=!0,t.prev=12,t.next=15,I.pedidos.updatePedido(e.form);case 15:a=t.sent,r=a.pedido,e.existentPedido=!!r,W.displaySuccess("Pedido alterado."),t.next=24;break;case 21:t.prev=21,t.t1=t["catch"](12),null!==(s=t.t1.response)&&void 0!==s&&null!==(o=s.data)&&void 0!==o&&o.error?W.displayError(t.t1.response.data.error):W.displayError("Ocorreu um erro ao alterar o pedido.");case 24:e.isBusy=!1;case 25:case"end":return t.stop()}}),t,null,[[2,7],[12,21]])})))()},deletePedido:function(){var e=this;this.existentPedido&&this.form.numero&&this.form.tipo&&!this.isBusy&&W.displayConfirm("Deseja realmente excluir a ".concat(this.form.tipo," nº ").concat(this.form.numero,"?"),Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isBusy=!0,t.prev=1,t.next=4,I.pedidos.deletePedido(e.form.tipo,e.form.numero);case 4:e.clearForm(),W.displaySuccess("Pedido excluído."),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),null!==(a=t.t0.response)&&void 0!==a&&null!==(r=a.data)&&void 0!==r&&r.error?W.displayError(t.t0.response.data.error):W.displayError("Ocorreu um erro ao excluir o pedido.");case 11:e.isBusy=!1;case 12:case"end":return t.stop()}}),t,null,[[1,8]])}))))},clearForm:function(){var e=this;this.isBusy=!0,this.form.numero="",this.form.tipo="SE",this.form.dataChegada="",this.form.secretariaSolicitante="",this.form.projeto="",this.form.descricao="",this.form.dataEnvioFinanceiro="",this.form.dataRetornoFinanceiro="",this.form.situacaoAutorizacao="",this.form.observacoes="",this.existentPedido=!1,this.isBusy=!1,this.$nextTick((function(){e.$refs.numeroInput.focus()}))}},mounted:function(){this.$refs.numeroInput.focus()}},le=ce,ue=Object(m["a"])(le,H,Q,!1,null,null,null),de=ue.exports,me={namespaced:!0,state:{isInitialized:!1,usuario:null,accessToken:null},getters:{isInitialized:function(e){return e.isInitialized},usuario:function(e){return e.usuario},accessToken:function(e){return e.accessToken},isAuthenticated:function(e){return!!e.usuario&&!!e.accessToken},isAdmin:function(e){return!!e.usuario&&e.usuario.admin}},mutations:{setIsInitialized:function(e,t){e.isInitialized=t},setUsuario:function(e,t){e.usuario=t},setAccessToken:function(e,t){e.accessToken=t,t?localStorage.setItem("accessToken",t):localStorage.removeItem("accessToken")}},actions:{initialize:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.commit,r=localStorage.getItem("accessToken"),!r){t.next=18;break}return a("setAccessToken",r),t.prev=4,t.next=7,I.auth.me();case 7:s=t.sent,o=s.usuario,a("setUsuario",o),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](4),a("setUsuario",null),a("setAccessToken",null);case 16:t.next=20;break;case 18:a("setUsuario",null),a("setAccessToken",null);case 20:a("setIsInitialized",!0);case 21:case"end":return t.stop()}}),t,null,[[4,12]])})))()}}},pe=me;r["a"].use(l["a"]);var ve=new l["a"].Store({modules:{auth:pe}}),fe=ve,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("NavBar"),a("div",{staticClass:"container"},[e._m(0),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.searchPedidos.apply(null,arguments)}}},[a("div",{staticClass:"row align-items-end"},[a("div",{staticClass:"col col-3"},[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Data de Envio ao Financeiro")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.dataEnvioFinanceiro,expression:"form.dataEnvioFinanceiro"}],ref:"dataEnvioFinanceiroInput",staticClass:"form-control form-control-sm",attrs:{type:"date",disabled:e.isBusy},domProps:{value:e.form.dataEnvioFinanceiro},on:{change:e.clearPedidos,input:function(t){t.target.composing||e.$set(e.form,"dataEnvioFinanceiro",t.target.value)}}})]),a("div",{staticClass:"col col-9"},[a("button",{staticClass:"btn btn-sm btn-primary me-2",attrs:{type:"submit",disabled:e.isBusy}},[a("i",{staticClass:"bi bi-search"}),e._v(" Buscar ")]),a("button",{staticClass:"btn btn-sm btn-secondary me-2",attrs:{type:"button",disabled:e.isBusy},on:{click:e.clearForm}},[a("i",{staticClass:"bi bi-eraser"}),e._v(" Limpar ")]),a("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button",disabled:e.isBusy||!e.didSearch},on:{click:e.exportToPDF}},[a("i",{staticClass:"bi bi-file-earmark-pdf"}),e._v(" Exportar para PDF ")])])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[e.pedidos.length>0?a("table",{staticClass:"table table-sm table-striped table-hover"},[e._m(1),a("tbody",e._l(e.pedidos,(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.tipo+" "+t.numero))]),a("td",[e._v(e._s(t.secretariaSolicitante))]),a("td",[e._v(e._s(t.projeto))]),a("td",[e._v(e._s(t.descricao))])])})),0)]):a("p",{staticClass:"fs-6"},[e._v("Nenhum pedido...")])])])])],1)},he=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h3",{staticClass:"my-4"},[a("i",{staticClass:"bi bi-clipboard-data"}),e._v(" Relatórios ")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{staticClass:"w-15"},[e._v("#")]),a("th",{staticClass:"w-25"},[e._v("Secretaria")]),a("th",{staticClass:"w-20"},[e._v("Projeto")]),a("th",{staticClass:"w-40"},[e._v("Descrição")])])])}],Ce=(a("d3b7"),a("ddb0"),a("1276"),a("d81d"),a("8baf")),ye=a("0da4");Object(ye["applyPlugin"])(Ce["jsPDF"]);var ge={download:function(e,t){var a=new Ce["jsPDF"];a.setFontSize(20),a.text("Relatório de Pedidos",15,25),a.setFontSize(10);var r=t?B.a.reverse(t.split("-")).join("/"):"Não enviado.";a.text("Data de Envio ao Financeiro: ".concat(r),15,35),e.length>0?a.autoTable({body:e.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{identifier:"".concat(e.tipo," ").concat(e.numero)})})),columns:[{header:"#",dataKey:"identifier"},{header:"Secretaria",dataKey:"secretariaSolicitante"},{header:"Projeto",dataKey:"projeto"},{header:"Descrição",dataKey:"descricao"}],theme:"grid",columnStyles:{identifier:{cellWidth:20,halign:"center",valign:"middle"},secretariaSolicitante:{cellWidth:25,valign:"middle"},projeto:{cellWidth:25,valign:"middle"},descricao:{valign:"middle"}},headStyles:{halign:"center",valign:"middle",textColor:0,fillColor:230},startY:45,margin:{bottom:20}}):(a.setFontSize(10),a.text("Nenhum pedido encontrado...",15,45));for(var s=a.internal.pages.length-1,o=1;o<=s;o+=1){var i="Página ".concat(o," de ").concat(s);a.setPage(o).setFontSize(10),a.setPage(o).text(i,15,a.internal.pageSize.height-10)}a.save("Relatório de Pedidos.pdf")}},xe=ge,we={relatorioPedidos:xe},_e=we,ke={name:"Relatorios",components:{NavBar:re},data:function(){return{isBusy:!1,didSearch:!1,pedidos:[],form:{dataEnvioFinanceiro:""}}},methods:{exportToPDF:function(){!this.isBusy&&this.didSearch&&_e.relatorioPedidos.download(this.pedidos,this.form.dataEnvioFinanceiro)},searchPedidos:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isBusy){t.next=2;break}return t.abrupt("return");case 2:return e.isBusy=!0,t.prev=3,t.next=6,I.pedidos.getPedidos(e.form);case 6:a=t.sent,r=a.pedidos,e.pedidos=B.a.values(r),e.didSearch=!0,W.displaySuccess("Pedidos carregados com sucesso."),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](3),null!==(s=t.t0.response)&&void 0!==s&&null!==(o=s.data)&&void 0!==o&&o.error?W.displayError(t.t0.response.data.error):W.displayError("Ocorreu um erro ao buscar os pedidos.");case 16:e.isBusy=!1;case 17:case"end":return t.stop()}}),t,null,[[3,13]])})))()},clearPedidos:function(){this.pedidos=[],this.didSearch=!1},clearForm:function(){this.isBusy||(this.isBusy=!0,this.form.dataEnvioFinanceiro="",this.clearPedidos(),this.isBusy=!1)},mounted:function(){this.$refs.dataEnvioFinanceiroInput.focus()}}},Se=ke,Ee=Object(m["a"])(Se,be,he,!1,null,null,null),Pe=Ee.exports,Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("NavBar"),a("div",{staticClass:"container"},[e._m(0),a("div",{staticClass:"row"},[a("div",{staticClass:"col mw-600px"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.updateSenha.apply(null,arguments)}}},[a("div",{staticClass:"row align-items-end"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Nova Senha")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.newSenha,expression:"form.newSenha"}],ref:"newSenhaInput",staticClass:"form-control form-control-sm",attrs:{type:"password",required:"",disabled:e.isBusy},domProps:{value:e.form.newSenha},on:{input:function(t){t.target.composing||e.$set(e.form,"newSenha",t.target.value)}}})]),a("div",{staticClass:"col"},[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Repita a Nova Senha")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.repeatNewSenha,expression:"form.repeatNewSenha"}],staticClass:"form-control form-control-sm",attrs:{type:"password",required:"",disabled:e.isBusy},domProps:{value:e.form.repeatNewSenha},on:{input:function(t){t.target.composing||e.$set(e.form,"repeatNewSenha",t.target.value)}}})]),a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit",disabled:e.isBusy}},[a("i",{staticClass:"bi bi-check2-circle"}),e._v(" Alterar Senha ")])])])])])])])],1)},je=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h3",{staticClass:"my-4"},[a("i",{staticClass:"bi bi-key"}),e._v(" Alterar Senha ")])])])}],Oe={name:"AlterarSenha",components:{NavBar:re},data:function(){return{isBusy:!1,form:{newSenha:"",repeatNewSenha:""},validationSchema:S["a"]().shape({newSenha:S["b"]().required('O campo "Nova Senha" é obrigatório.'),repeatNewSenha:S["b"]().required('O campo "Repita a Nova Senha" é obrigatório.')})}},methods:{updateSenha:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isBusy){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.validationSchema.validate(e.form,{abortEarly:!1});case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t["catch"](2),W.displayError(t.t0.errors.join("\n")),t.abrupt("return");case 11:if(e.form.newSenha===e.form.repeatNewSenha){t.next=14;break}return W.displayError("Os campos 'Nova Senha' e 'Repita a Nova Senha' não conferem."),t.abrupt("return");case 14:return e.isBusy=!0,t.prev=15,a=e.$store.getters["auth/usuario"],t.next=19,I.usuarios.updateUsuario(Object(c["a"])(Object(c["a"])({},a),{},{senha:e.form.newSenha}));case 19:return W.displaySuccess("Senha alterada com sucesso. Caso a esqueça, contate o administrador para redefini-la."),t.next=22,e.$router.replace({name:"pedidos"});case 22:t.next=27;break;case 24:t.prev=24,t.t1=t["catch"](15),null!==(r=t.t1.response)&&void 0!==r&&null!==(s=r.data)&&void 0!==s&&s.error?W.displayError(t.t1.response.data.error):W.displayError("Ocorreu um erro ao alterar a senha.");case 27:e.isBusy=!1;case 28:case"end":return t.stop()}}),t,null,[[2,7],[15,24]])})))()},mounted:function(){this.$refs.newSenhaInput.focus()}}},Ne=Oe,Ae=Object(m["a"])(Ne,Be,je,!1,null,null,null),$e=Ae.exports,Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("NavBar"),a("div",{staticClass:"container"},[e._m(0),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col mw-600px"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.createUsuario.apply(null,arguments)}}},[a("div",{staticClass:"row align-items-end"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("Nome")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.nome,expression:"form.nome"}],ref:"nomeInput",staticClass:"form-control form-control-sm",attrs:{type:"text",disabled:e.isBusy},domProps:{value:e.form.nome},on:{input:function(t){t.target.composing||e.$set(e.form,"nome",t.target.value)}}})]),a("div",{staticClass:"col"},[a("label",{staticClass:"form-label col-form-label-sm"},[e._v("E-mail")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control form-control-sm",attrs:{type:"text",disabled:e.isBusy},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})]),a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit",disabled:e.isBusy}},[a("i",{staticClass:"bi bi-person-plus"}),e._v(" Criar Usuário ")])])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("table",{staticClass:"table table-sm table-striped table-hover"},[e._m(1),a("tbody",e._l(e.usuarios,(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.nome))]),a("td",[e._v(e._s(t.email))]),t.admin?a("td",[e._v(" ")]):a("td",{staticClass:"text-end"},[a("button",{staticClass:"btn btn-sm btn-danger me-2",attrs:{disabled:e.isBusy},on:{click:function(a){return e.deleteUsuario(t)}}},[a("i",{staticClass:"bi bi-person-dash"}),e._v(" Excluir ")]),a("button",{staticClass:"btn btn-sm btn-primary",attrs:{disabled:e.isBusy},on:{click:function(a){return e.redefineSenha(t)}}},[a("i",{staticClass:"bi bi-key"}),e._v(" Redefinir Senha ")])])])})),0),a("tfoot",[a("tr",[a("td",{staticClass:"text-end",attrs:{colspan:"3"}},[a("button",{staticClass:"btn btn-sm btn-secondary",attrs:{disabled:e.isBusy},on:{click:e.loadUsuarios}},[a("i",{staticClass:"bi bi-arrow-repeat"}),e._v(" Atualizar ")])])])])])])])])],1)},Fe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h3",{staticClass:"my-4"},[a("i",{staticClass:"bi bi-people"}),e._v(" Usuários ")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{staticClass:"w-40"},[e._v("Nome")]),a("th",{staticClass:"w-30"},[e._v("E-mail")]),a("th",{staticClass:"w-30"})])])}];function ze(e){for(var t="0123456789abcdefghijklmnopqrstuvwxyz!@#$%^&*()ABCDEFGHIJKLMNOPQRSTUVWXYZ",a="",r=0;r<=e;r+=1){var s=Math.floor(Math.random()*t.length);a+=t.substring(s,s+1)}return a}var Ue={name:"Usuarios",components:{NavBar:re},data:function(){return{isBusy:!1,usuarios:[],form:{nome:"",email:""},validationSchema:S["a"]().shape({nome:S["b"]().required('O campo "Nome" é obrigatório.'),email:S["b"]().email('O campo "E-mail" deve conter um e-mail válido.').required('O campo "E-mail" é obrigatório.')})}},methods:{createUsuario:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isBusy){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.validationSchema.validate(e.form,{abortEarly:!1});case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t["catch"](2),W.displayError(t.t0.errors.join("\n")),t.abrupt("return");case 11:return e.isBusy=!0,t.prev=12,a=ze(12),t.next=16,I.usuarios.createUsuario(Object(c["a"])(Object(c["a"])({},e.form),{},{senha:a}));case 16:return e.form.nome="",e.form.email="",e.isBusy=!1,W.displaySuccess("Usuário de e-mail ".concat(e.email,' criado com sucesso. A senha do novo usuário é "').concat(a,'".')),e.$refs.nomeInput.focus(),t.next=23,e.loadUsuarios();case 23:t.next=29;break;case 25:t.prev=25,t.t1=t["catch"](12),null!==(r=t.t1.response)&&void 0!==r&&null!==(s=r.data)&&void 0!==s&&s.error?W.displayError(t.t1.response.data.error):W.displayError("Ocorreu um erro ao criar o usuário."),e.isBusy=!1;case 29:case"end":return t.stop()}}),t,null,[[2,7],[12,25]])})))()},loadUsuarios:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isBusy){t.next=2;break}return t.abrupt("return");case 2:return e.isBusy=!0,t.prev=3,t.next=6,I.usuarios.getUsuarios();case 6:a=t.sent,r=a.usuarios,e.usuarios=B.a.values(r),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),null!==(s=t.t0.response)&&void 0!==s&&null!==(o=s.data)&&void 0!==o&&o.error?W.displayError(t.t0.response.data.error):W.displayError("Ocorreu um erro ao carregar os usuários.");case 14:e.isBusy=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},deleteUsuario:function(e){var t=this;this.isBusy||W.displayConfirm("Deseja realmente excluir o usuário de e-mail ".concat(e.email,"?"),Object(f["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isBusy=!0,a.prev=1,a.next=4,I.usuarios.deleteUsuario(e.id);case 4:W.displaySuccess("Usuário excluído com sucesso."),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](1),null!==(r=a.t0.response)&&void 0!==r&&null!==(s=r.data)&&void 0!==s&&s.error?W.displayError(a.t0.response.data.error):W.displayError("Ocorreu um erro ao excluir o usuário.");case 10:return t.isBusy=!1,a.next=13,t.loadUsuarios();case 13:case"end":return a.stop()}}),a,null,[[1,7]])}))))},redefineSenha:function(e){var t=this;this.isBusy||W.displayConfirm("Deseja realmente redefinir a senha do usuário de e-mail ".concat(e.email,"?"),Object(f["a"])(regeneratorRuntime.mark((function a(){var r,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isBusy=!0,a.prev=1,r=ze(12),a.next=5,I.usuarios.updateUsuario({id:e.id,nome:e.nome,email:e.email,senha:r});case 5:W.displaySuccess("Senha redefinida com sucesso. A nova senha do usuário de e-mail ".concat(e.email,' é "').concat(r,'".')),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),null!==(s=a.t0.response)&&void 0!==s&&null!==(o=s.data)&&void 0!==o&&o.error?W.displayError(a.t0.response.data.error):W.displayError("Ocorreu um erro ao redefinir a senha do usuário.");case 11:t.isBusy=!1;case 12:case"end":return a.stop()}}),a,null,[[1,8]])}))))}},mounted:function(){this.$refs.nomeInput.focus(),this.loadUsuarios()}},Te=Ue,Ie=Object(m["a"])(Te,Re,Fe,!1,null,null,null),De=Ie.exports;r["a"].use(b["a"]);var qe=[{path:"/",name:"inicio",component:w},{path:"/login",name:"login",component:Y},{path:"/pedidos",name:"pedidos",component:de,meta:{requireAuth:!0}},{path:"/relatorios",name:"relatorios",component:Pe,meta:{requireAuth:!0}},{path:"/alterar-senha",name:"alterarSenha",component:$e,meta:{requireAuth:!0}},{path:"/usuarios",name:"usuarios",component:De,meta:{requireAuth:!0,requireAdmin:!0}}],Le=new b["a"]({mode:"history",base:"/",routes:qe});Le.beforeEach(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t,a,r){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.meta,fe.getters["auth/isInitialized"]){e.next=4;break}return e.next=4,fe.dispatch("auth/initialize");case 4:if(!s.requireAuth||fe.getters["auth/isAuthenticated"]){e.next=7;break}return W.displayError("Você não está autenticado."),e.abrupt("return",r({name:"login"}));case 7:if(!s.requireAdmin||fe.getters["auth/isAdmin"]){e.next=10;break}return W.displayError("Você não tem permissão."),e.abrupt("return",r({name:"pedidos"}));case 10:return e.abrupt("return",r());case 11:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}());var Me=Le;a("a1a3");o.a.interceptors.request.use((function(e){var t=e,a=localStorage.getItem("accessToken");return a&&!e.headers.Authorization&&(t.headers.Authorization="Bearer ".concat(a)),t})),new r["a"]({router:Me,store:fe,render:function(e){return e(v)}}).$mount("#app")},a1a3:function(e,t,a){},b66f:function(e,t,a){e.exports=a.p+"../../static/vue/img/brasao_prefeitura.29d4fff0.jpg"}});
//# sourceMappingURL=app.66168aff.js.map